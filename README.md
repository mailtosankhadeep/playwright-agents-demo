# Playwright Agents Demo

Automated UI testing playground for [practice-automation.com](https://practice-automation.com) using Playwright. The project mixes traditional Playwright specs with Cucumber BDD scenarios (implemented in TypeScript) and captures Playwright traces for every BDD run.

## Prerequisites
- Node.js 18+
- npm (bundled with Node.js)

Install project dependencies and Playwright browsers:

```powershell
npm install
npx playwright install
```

## Project Structure
- `feature/` – Gherkin feature files
- `step-definition/` – Cucumber step definitions written in TypeScript
- `test-results/` – Playwright trace archives generated by BDD runs
- `seed.spec.ts` – placeholder spec produced by `playwright init-agents`
- `.vscode/mcp.json` – configuration for the Playwright MCP server

## Scripts
Run the default Playwright test runner:
```powershell
npm run test
```

Execute all BDD scenarios headless:
```powershell
npm run bdd
```

Execute all BDD scenarios headed (shows the browser):
```powershell
npm run bdd:headed
```

Each BDD run automatically records a Playwright trace under `test-results/trace-<timestamp>.zip`.

## Inspecting Traces
Open any saved trace with the Playwright trace viewer:
```powershell
npx playwright show-trace test-results/trace-<timestamp>.zip
```

## Customising
- Set `TRACE_DIR` to change where trace files are saved.
- Toggle headed mode manually by setting `HEADED=1` before running `npm run bdd`.
- Extend the `.feature` files and add matching step definitions in TypeScript to grow your test suite.

## Playwright Agents (MCP) Configuration
This project is pre-wired to work with GitHub Copilot Playwright Agents via the Model Context Protocol (MCP).

1. Ensure dependencies are installed (`npm install`) and Playwright browsers are available (`npx playwright install`).
2. Keep the MCP configuration at `.vscode/mcp.json`:
	 ```json
	 {
		 "servers": {
			 "playwright-test": {
				 "type": "stdio",
				 "command": "npx",
				 "args": ["playwright", "run-test-mcp-server"]
			 }
		 },
		 "inputs": []
	 }
	 ```
3. Reload VS Code (Command Palette → `Developer: Reload Window`) so Copilot can register the server.
4. In Copilot Chat, request Playwright actions (e.g., "Run Playwright tests" or "Open the last trace"). The MCP server will broker those commands using the local Playwright install.

### Installing Playwright Agent Chat Modes (Planner, Generator, Healer)

Install the Playwright Agent chat modes once per workspace to populate `.github/chatmodes/` for Copilot.

```powershell
npx playwright init-agents --loop=vscode
```

The command installs or updates the Planner, Generator, and Healer chat mode definitions so Copilot can orchestrate those agents.

If you prefer non-interactive startup, adjust the args to `"args": ["--yes", "playwright", "run-test-mcp-server"]` so `npx` skips prompts.

## GitHub Setup
This repository is ready for GitHub pushes. Use the provided `.gitignore` to keep dependencies, build artefacts, and IDE files out of version control.
